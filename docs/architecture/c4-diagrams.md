## C4 Архитектура

### 1.Context-диаграмма (C4 Model: Context)
Показывает систему в целом и ее взаимодействие с внешними акторами и системами.
[context_diagram.png]

### 2. Container-диаграмма (C4 Model: Container)
Декомпозиция системы на ключевые приложения и сервисы.
[container_diagram.png]

### 3. Выбор и обоснование технологий

| Компонент | Технология | Обоснование выбора |
|-----------|------------|-------------------|
| **Frontend** | React/Next.js | Быстрая разработка интерактивного SPA с поддержкой загрузки файлов. Next.js упрощает роутинг и рендеринг. |
| **Backend (API)** | FastAPI | Высокая производительность для IO-операций, автоматическая генерация OpenAPI-документации, простота интеграции с асинхронными задачами. |
| **Backend (Ядро)** | Django | Мощный ORM для работы с профилями, рецептами, историей. Встроенная админ-панель для управления контентом. |
| **Очереди/Кеш** | Redis | Стандарт для организации очередей задач (Celery) и кеширования частых запросов (например, шаблонов ответов LLM). |
| **База данных** | PostgreSQL | Надежная реляционная СУБД с поддержкой JSON для хранения структурированных данных пользователей и рецептов. |
| **LLM-интеграция** | LangChain | Фреймворк для оркестрации работы с моделями (Llava, Llama), управления промптами и изоляции бизнес-логики от конкретной модели. |
| **Инфраструктура** | Docker, Docker Compose | Контейнеризация для изоляции сервисов (Ollama, бэкенд, БД) и простого развертывания. |

## 4. Описание ключевых интерфейсов (API Endpoints)

### `POST /api/v1/analyze`
**Основной эндпоинт для запуска анализа.**

- **Вход (Request Body):** `multipart/form-data`
    - `image` (файл) — фотография блюда
    - `recipe_text` (строка, опционально) — текстовый рецепт
    - `recipe_id` (целое число, опционально) — ID сохраненного рецепта
- **Выход (Response):**
    ```json
    {
        "analysis_id": "uuid",
        "status": "queued"
    }
    ```

### `GET /api/v1/analysis/{id}`
**Получение результата по ID.**

- **Выход:**
    ```json
    {
        "status": "completed",
        "scores": {
            "recipe_match": 4,
            "visual_appeal": 5
        },
        "feedback": "Текст обратной связи..."
    }
    ```

### `GET /api/v1/recipes`
**Получение списка сохраненных рецептов пользователя.**

### `GET /api/v1/history`
**Получение истории оценок с пагинацией.**