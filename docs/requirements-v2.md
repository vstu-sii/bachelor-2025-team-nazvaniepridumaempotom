# Итоги по требованиям

## 1. Валидация use-cases через прототип

| Use-Case | Проверяемая функциональность | Статус в прототипе | Отклонения |
|----------|-----------------------------|-------------------|------------|
| **UC-1: Оценка по новому рецепту** | 1. Загрузка фото<br>2. Ввод текста рецепта<br>3. Получение оценок (рецепт, вид)<br>4. Сохранение в историю | ✅ Частично реализовано | Реализован только endpoint `/analyze-image` без сохранения в историю и возврата двух отдельных оценок |
| **UC-2: Оценка по сохраненному рецепту** | 1. Выбор из списка рецептов<br>2. Загрузка фото<br>3. Привязка к рецепту | ❌ Не реализовано | Отсутствует функционал сохранения и выбора рецептов |
| **UC-3: Просмотр истории** | 1. Просмотр всех оценок<br>2. Сортировка по дате<br>3. Отображение фото+рецепт+оценки | ❌ Не реализовано | Нет базы данных и интерфейса истории |

**Выводы по валидации:**
1. **Реализовано ядро:** Работа с LLM (Ollama), базовый анализ изображения
2. **Отсутствует важный функционал:** История, работа с рецептами, пользовательские аккаунты
3. **Отклонение от архитектуры:** Используется монолит FastAPI вместо разделения на сервисы

## 2. Анализ отклонений от плана

| Планируемый компонент | Фактическая реализация | Последствия | Критичность |
|----------------------|----------------------|-------------|-------------|
| **Раздельная архитектура** | Монолит на FastAPI | Упрощает разработку, но усложняет масштабирование | Средняя |
| **PostgreSQL + Redis** | Временное хранение в памяти | Потеря данных при перезапуске | Высокая |
| **Асинхронная обработка** | Синхронные запросы | Блокировка при долгой обработке LLM | Высокая |
| **Фронтенд Next.js** | Только API endpoints | Нет пользовательского интерфейса | Критичная |
| **Аутентификация** | Отсутствует | Нет изоляции данных пользователей | Высокая |

**Ключевые риски:**
1. **Потеря данных:** Все анализы теряются при перезапуске сервера
2. **Проблемы с масштабированием:** Один LLM-запрос блокирует весь сервис
3. **Отсутствие UI:** Пользователи не могут использовать продукт без технических навыков

## 3. Обновление документации требований

**Добавленные требования (на основе реализации):**
TR-8: Поддержка временного хранения результатов в сессии
TR-9: Возможность работы через API без фронтенда
TR-10: Минимальные системные требования для локального запуска (8GB RAM)

**Измененные требования:**
TR-3 (изменено): Интеграция с Llava для анализа ТОЛЬКО изображения
TR-4 (изменено): Использование Llama 3.2 для анализа ТОЛЬКО текста рецепта


**Новый Use-Case:**
UC-4: Быстрый анализ без сохранения
• Актор: Технический пользователь
• Сценарий: Отправка POST-запроса с фото напрямую к API
• Цель: Интеграция с внешними системами или скриптами